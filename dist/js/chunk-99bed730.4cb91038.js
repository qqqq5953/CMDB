(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99bed730"],{b06d:function(e,t,c){"use strict";c.r(t);c("b680");var l=c("7a23"),r={class:"container py-5 px-3 px-xl-0"},a=Object(l["h"])("header",null,[Object(l["h"])("div",{class:"d-flex align-items-center"},[Object(l["h"])("i",{class:"bi bi-card-checklist text-warning me-3 fs-1"}),Object(l["h"])("h2",{class:"h1 mb-0 text-primary"},"訂單")])],-1),n={class:"table-responsive my-4"},o={class:"table align-middle"},d=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",{scope:"col"},"購買時間"),Object(l["h"])("th",{scope:"col"},"Email"),Object(l["h"])("th",{scope:"col"},"購買品項"),Object(l["h"])("th",{scope:"col",class:"text-end text-nowrap"},"應付金額"),Object(l["h"])("th",{scope:"col",class:"text-nowrap"},"是否付款"),Object(l["h"])("th",{scope:"col"},"編輯")])],-1),b={scope:"row"},s={key:0,class:"text-end"},i={class:"form-check form-switch"},O=["checked"],h={key:0,class:"form-check-label text-nowrap text-success fw-bold",for:"flexSwitchCheckChecked"},j={key:1,class:"form-check-label text-nowrap text-muted fw-bold",for:"flexSwitchCheckChecked"},u={class:"btn-group btn-group-sm",role:"group"},p=["onClick"],m=["onClick"];function f(e,t,c,f,g,x){var v=Object(l["J"])("Loading"),M=Object(l["J"])("Pagination"),y=Object(l["J"])("OrderEditModal"),k=Object(l["J"])("OrderDeleteModal");return Object(l["z"])(),Object(l["g"])(l["a"],null,[Object(l["k"])(v,{active:g.isLoading},null,8,["active"]),Object(l["h"])("div",r,[a,Object(l["h"])("main",n,[Object(l["h"])("table",o,[d,Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(g.orders,(function(t){return Object(l["z"])(),Object(l["g"])("tr",{key:t.id},[Object(l["h"])("th",b,Object(l["M"])(e.$filters.date(t.paid_date)),1),Object(l["h"])("td",null,Object(l["M"])(t.user.email),1),Object(l["h"])("td",null,[Object(l["h"])("ul",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(t.products,(function(e){return Object(l["z"])(),Object(l["g"])("li",{key:e.id},Object(l["M"])(e.product.title),1)})),128))])]),t.total?(Object(l["z"])(),Object(l["g"])("td",s," $"+Object(l["M"])(t.total.toFixed(2)),1)):Object(l["f"])("",!0),Object(l["h"])("td",null,[Object(l["h"])("div",i,[Object(l["h"])("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:t.is_paid,disabled:""},null,8,O),t.is_paid?(Object(l["z"])(),Object(l["g"])("label",h,"已付款")):(Object(l["z"])(),Object(l["g"])("label",j,"未付款"))])]),Object(l["h"])("td",null,[Object(l["h"])("div",u,[Object(l["h"])("button",{type:"button",class:"btn btn-sm btn-outline-primary text-nowrap",onClick:function(e){return x.openOrderModal(t)}}," 檢視 ",8,p),Object(l["h"])("button",{type:"button",class:"btn btn-sm btn-outline-danger text-nowrap",onClick:function(e){return x.openOrderDeleteModal(t,g.pagination)}}," 刪除 ",8,m)])])])})),128))])])]),Object(l["k"])(M,{pages:g.pagination,onChangePage:x.getOrders,onPreviousPage:x.getOrders,onNextPage:x.getOrders},null,8,["pages","onChangePage","onPreviousPage","onNextPage"]),Object(l["k"])(y,{ref:"orderEditModal",order:g.tempOrder},null,8,["order"]),Object(l["k"])(k,{ref:"orderDeleteModal",order:g.tempDeleteOrder,onDeleteOrder:x.deleteOrder},null,8,["order","onDeleteOrder"])])],64)}var g=c("1da1"),x=c("5530"),v=(c("96cf"),c("99af"),c("b0c0"),{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",ref:"modal"}),M={class:"modal-dialog modal-xl",role:"document"},y={class:"modal-content border-0"},k=Object(l["h"])("div",{class:"modal-header bg-dark"},[Object(l["h"])("h5",{class:"modal-title text-white"},[Object(l["h"])("span",null,"訂單細節")]),Object(l["h"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),w={class:"modal-body"},z={class:"row"},C={class:"col-lg-4"},D=Object(l["h"])("h3",null,"用戶資料",-1),P={class:"table"},_=Object(l["h"])("th",null,"姓名",-1),$=Object(l["h"])("th",null,"Email",-1),L=Object(l["h"])("th",null,"電話",-1),S=Object(l["h"])("th",null,"地址",-1),E={class:"col-lg-8"},F=Object(l["h"])("h3",null,"訂單細節",-1),J={class:"table-responsive"},U={class:"table align-middle"},H=Object(l["h"])("th",{class:"text-nowrap"},"訂單編號",-1),R=Object(l["h"])("th",{class:"text-nowrap"},"下單時間",-1),q=Object(l["h"])("th",{class:"text-nowrap"},"付款時間",-1),N=Object(l["h"])("th",{class:"text-nowrap"},"付款狀態",-1),I=Object(l["h"])("th",{class:"text-nowrap"},"總金額",-1),T={key:0},X=Object(l["h"])("h3",null,"選購商品",-1),A={class:"table-responsive"},B={class:"table align-middle"},G={key:0,class:"text-end"},K={class:"modal-footer"},Q=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function V(e,t,c,r,a,n){return Object(l["z"])(),Object(l["g"])("div",v,[Object(l["h"])("div",M,[Object(l["h"])("div",y,[k,Object(l["h"])("div",w,[Object(l["h"])("div",z,[Object(l["h"])("div",C,[D,Object(l["h"])("table",P,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[_,Object(l["h"])("td",null,Object(l["M"])(a.tempUser.name),1)]),Object(l["h"])("tr",null,[$,Object(l["h"])("td",null,Object(l["M"])(a.tempUser.email),1)]),Object(l["h"])("tr",null,[L,Object(l["h"])("td",null,Object(l["M"])(a.tempUser.tel),1)]),Object(l["h"])("tr",null,[S,Object(l["h"])("td",null,Object(l["M"])(a.tempUser.address),1)])])])]),Object(l["h"])("div",E,[F,Object(l["h"])("div",J,[Object(l["h"])("table",U,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[H,Object(l["h"])("td",null,Object(l["M"])(a.tempOrder.id),1)]),Object(l["h"])("tr",null,[R,Object(l["h"])("td",null,Object(l["M"])(e.$filters.date(a.tempOrder.create_at)),1)]),Object(l["h"])("tr",null,[q,Object(l["h"])("td",null,Object(l["M"])(e.$filters.date(a.tempOrder.paid_date)),1)]),Object(l["h"])("tr",null,[N,Object(l["h"])("td",{class:Object(l["s"])({"text-success":a.tempOrder.is_paid})},Object(l["M"])(a.tempOrder.is_paid?"已付款":"未付款"),3)]),Object(l["h"])("tr",null,[I,a.tempOrder.total?(Object(l["z"])(),Object(l["g"])("td",T,Object(l["M"])(a.tempOrder.total.toFixed(2)),1)):Object(l["f"])("",!0)])])])]),X,Object(l["h"])("div",A,[Object(l["h"])("table",B,[Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(a.tempProducts,(function(e){return Object(l["z"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["M"])(e.product.title),1),Object(l["h"])("td",null,Object(l["M"])(e.qty)+" / "+Object(l["M"])(e.product.unit),1),e.final_total?(Object(l["z"])(),Object(l["g"])("td",G,Object(l["M"])(e.final_total.toFixed(2)),1)):Object(l["f"])("",!0)])})),128))])])])])])]),Object(l["h"])("div",K,[Q,Object(l["h"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return e.hideModal&&e.hideModal.apply(e,arguments)})}," 確認 ")])])])],512)}var W=c("e0ae"),Y={mixins:[W["a"]],props:{order:{type:Object,default:function(){return{}}}},data:function(){return{tempOrder:{},tempProducts:{},tempUser:{}}},watch:{order:function(){this.tempOrder=this.order,this.tempProducts=this.order.products,this.tempUser=this.order.user}}},Z=c("d959"),ee=c.n(Z);const te=ee()(Y,[["render",V]]);var ce=te,le={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",ref:"modal"},re={class:"modal-dialog modal-xl",role:"document"},ae={class:"modal-content border-0"},ne=Object(l["h"])("div",{class:"modal-header bg-danger"},[Object(l["h"])("h5",{class:"modal-title text-white",id:"exampleModalLabel"},[Object(l["h"])("span",null,"刪除訂單")]),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),oe={class:"modal-body"},de=Object(l["h"])("h5",null,"是否刪除以下訂單？（刪除後無法復原）",-1),be={class:"table table-borderless"},se=Object(l["h"])("thead",{class:"border-bottom"},[Object(l["h"])("tr",null,[Object(l["h"])("th",{scope:"col"},"名稱"),Object(l["h"])("th",{scope:"col"},"數量"),Object(l["h"])("th",{scope:"col",class:"text-end"},"金額")])],-1),ie={key:0,class:"text-end"},Oe={class:"modal-footer"},he=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function je(e,t,c,r,a,n){return Object(l["z"])(),Object(l["g"])("div",le,[Object(l["h"])("div",re,[Object(l["h"])("div",ae,[ne,Object(l["h"])("div",oe,[de,Object(l["h"])("table",be,[se,Object(l["h"])("tbody",null,[(Object(l["z"])(!0),Object(l["g"])(l["a"],null,Object(l["H"])(a.tempOrder.products,(function(e){return Object(l["z"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["M"])(e.product.title),1),Object(l["h"])("td",null,Object(l["M"])(e.qty)+" / "+Object(l["M"])(e.product.unit),1),e.final_total?(Object(l["z"])(),Object(l["g"])("td",ie,Object(l["M"])(e.final_total.toFixed(2)),1)):Object(l["f"])("",!0)])})),128))])])]),Object(l["h"])("div",Oe,[he,Object(l["h"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(t){return e.$emit("delete-order",a.tempOrder)})}," 確認刪除 ")])])])],512)}var ue={mixins:[W["a"]],props:{order:{type:Object}},data:function(){return{tempOrder:{}}},watch:{order:function(){this.tempOrder=this.order}}};const pe=ee()(ue,[["render",je]]);var me=pe,fe=c("1799"),ge={components:{OrderEditModal:ce,OrderDeleteModal:me,Pagination:fe["a"]},inject:["pushMessageStateForDashboard"],data:function(){return{isLoading:!1,tempOrder:{},tempDeleteOrder:{},orders:[],pagination:{}}},methods:{openOrderModal:function(e){this.tempOrder=e,this.$refs.orderEditModal.showModal()},openOrderDeleteModal:function(e,t){this.tempDeleteOrder=Object(x["a"])(Object(x["a"])({},e),t),this.$refs.orderDeleteModal.showModal()},deleteOrder:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var l,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/admin/order/").concat(e.id),c.next=3,t.$http.delete(l).catch((function(e){console.log(e)}));case 3:r=e.current_page,t.getOrders(r),t.$refs.orderDeleteModal.hideModal();case 6:case"end":return c.stop()}}),c)})))()},getOrders:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function c(){var l,r;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return t.isLoading=!0,l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("e-commerce-api","/admin/orders?page=").concat(e),c.next=4,t.$http.get(l).catch((function(e){console.log(e)}));case 4:r=c.sent,t.orders=r.data.orders,t.pagination=r.data.pagination,t.isLoading=!1;case 8:case"end":return c.stop()}}),c)})))()}},created:function(){this.getOrders()}};const xe=ee()(ge,[["render",f]]);t["default"]=xe},b0c0:function(e,t,c){var l=c("83ab"),r=c("5e77").EXISTS,a=c("e330"),n=c("9bf2").f,o=Function.prototype,d=a(o.toString),b=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=a(b.exec),i="name";l&&!r&&n(o,i,{configurable:!0,get:function(){try{return s(b,d(this))[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-99bed730.4cb91038.js.map