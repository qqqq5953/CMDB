{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/user/Watchlist.vue?c3c9","webpack:///./src/views/user/Watchlist.vue","webpack:///./src/views/user/Watchlist.vue?fe1b"],"names":["uncurryThis","PROPER_FUNCTION_NAME","PROPER","redefine","anObject","isPrototypeOf","$toString","fails","regExpFlags","TO_STRING","RegExpPrototype","RegExp","prototype","n$ToString","getFlags","NOT_GENERIC","call","source","flags","INCORRECT_NAME","name","R","this","p","rf","f","undefined","unsafe","class","_createElementVNode","_hoisted_6","_hoisted_7","_createElementBlock","$data","length","_hoisted_2","_Fragment","_renderList","item","key","id","href","onClick","$options","style","poster_path","_toDisplayString","title","release_date","_createVNode","_component_router_link","to","_createBlock","_component_PaginationForUser","totalPages","currentPage","onChangePage","onPreviousPage","onNextPage","components","PaginationForUser","data","baseImageUrl","listProductsPerPage","listProducts","products","productID","perPage","methods","getList","api","process","$http","get","catch","err","console","log","response","items","setPagination","page","Math","ceil","startPage","endPage","slice","window","scrollTo","getAllProducts","filter","category","getProductID","filterProductArray","content","split","toString","$router","push","params","removeProductFromList","requestBody","media_id","post","created","__exports__","render"],"mappings":"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","file":"js/chunk-3329cb91.6e7485ee.js","sourcesContent":["'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Watchlist.vue?vue&type=style&index=0&id=4a711732&lang=scss&scoped=true\"","<template>\n  <div class=\"bg-dark h-100\">\n    <div\n      class=\"container py-5 px-5 px-xl-0\"\n      :class=\"{ 'h-100': !listProductsPerPage.length }\"\n    >\n      <header>\n        <div class=\"d-flex align-items-center\">\n          <i class=\"bi bi-bookmark-plus text-warning me-3 fs-4\"></i>\n          <h2 class=\"h1 text-white mb-0\">watchlist</h2>\n        </div>\n      </header>\n      <main class=\"py-4\" :class=\"{ 'h-100': !listProductsPerPage.length }\">\n        <ul class=\"row flex-wrap list-unstyled mb-0\">\n          <li\n            class=\"col-6 col-md-4 col-lg-3 mb-4\"\n            v-for=\"item in listProductsPerPage\"\n            :key=\"item.id\"\n          >\n            <div\n              class=\"card rounded-3 border-0 card-img-box-shadow h-100 position-relative\"\n            >\n              <!-- delete button -->\n              <a\n                href=\"#\"\n                @click.prevent=\"removeProductFromList(item.id)\"\n                class=\"position-absolute watchlist-item-delete d-block\"\n              >\n                <i class=\"bi bi-x-lg d-none d-md-block\"></i>\n                <i class=\"bi bi-x d-md-none\"></i>\n              </a>\n              <!-- card image -->\n              <a\n                href=\"#\"\n                class=\"text-decoration-none d-block overflow-hidden\"\n                @click.prevent=\"getProductID(item.id)\"\n              >\n                <div\n                  class=\"card-background rounded-3 card-img-border-adjusted\"\n                  :style=\"{\n                    backgroundImage: `url(${baseImageUrl + item.poster_path})`\n                  }\"\n                ></div>\n              </a>\n\n              <div class=\"card-body d-flex flex-column d-none d-md-block\">\n                <h5 class=\"card-title h4\">{{ item.title }}</h5>\n                <small class=\"mt-auto\">{{ item.release_date }}</small>\n              </div>\n            </div>\n          </li>\n        </ul>\n        <div\n          class=\"d-flex align-items-center justify-content-center h-100\"\n          v-if=\"!listProductsPerPage.length\"\n        >\n          <router-link :to=\"{ name: 'AllProducts' }\" class=\"btn btn-warning\"\n            >pick some movies now</router-link\n          >\n        </div>\n      </main>\n\n      <PaginationForUser\n        v-if=\"listProducts.length\"\n        :totalPages=\"totalPages\"\n        :currentPage=\"currentPage\"\n        @change-page=\"setPagination\"\n        @previous-page=\"setPagination\"\n        @next-page=\"setPagination\"\n      ></PaginationForUser>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PaginationForUser from '@/components/PaginationForUser.vue';\n\nexport default {\n  components: {\n    PaginationForUser\n  },\n  data() {\n    return {\n      baseImageUrl: 'https://image.tmdb.org/t/p/w300',\n      listProductsPerPage: [],\n      listProducts: [],\n      products: [],\n      productID: '',\n      // pagination\n      totalPages: undefined,\n      currentPage: 1,\n      perPage: 12\n    };\n  },\n  methods: {\n    async getList() {\n      const api = `https://api.themoviedb.org/3/list/${process.env.VUE_APP_LIST_ID}?api_key=${process.env.VUE_APP_KEY}&language=en-US`;\n\n      const response = await this.$http.get(api).catch((err) => {\n        console.log(err);\n      });\n\n      this.listProducts = response.data.items;\n\n      // 設置分頁\n      this.setPagination();\n    },\n    setPagination(page = 1) {\n      this.currentPage = page;\n\n      // 設定總頁數、起訖頁\n      this.totalPages = Math.ceil(this.listProducts.length / this.perPage);\n      const startPage = this.currentPage * this.perPage - this.perPage;\n      const endPage = startPage + this.perPage;\n\n      this.listProductsPerPage = this.listProducts.slice(startPage, endPage);\n\n      // 畫面滾動至最上方\n      window.scrollTo(0, -1000);\n    },\n    async getAllProducts() {\n      // api\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      const response = await this.$http.get(api).catch((err) => {\n        console.log(err);\n      });\n\n      this.products = response.data.products;\n\n      // 排除訂閱的類型（重要）\n      this.products = this.products.filter((item) => {\n        return item.category !== 'Subscription';\n      });\n    },\n    getProductID(id) {\n      // 找出產品 id\n      const filterProductArray = this.products.filter((item) => {\n        return item.content.split('|')[0] === id.toString();\n      });\n\n      this.productID = filterProductArray[0].id;\n\n      this.$router.push({\n        name: 'Product',\n        params: {\n          productID: this.productID\n        }\n      });\n    },\n    async removeProductFromList(id) {\n      // api\n      const api = `https://api.themoviedb.org/3/list/${process.env.VUE_APP_LIST_ID}/remove_item?api_key=${process.env.VUE_APP_KEY}&session_id=${process.env.VUE_APP_SESSION_ID}`;\n\n      const requestBody = {\n        media_id: id\n      };\n\n      await this.$http.post(api, requestBody).catch((err) => {\n        console.log(err);\n      });\n\n      // 重新 render 畫面\n      this.getList();\n    }\n  },\n  created() {\n    // 畫面滾動至最上方\n    window.scrollTo(0, -1000);\n\n    // 獲得 watchlist 資料\n    this.getList();\n\n    /* 點擊指定產品並前往該產品頁面，\n    得到 this.products 後給 this.getProductID() 使用 */\n    this.getAllProducts();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.watchlist-item-delete {\n  z-index: 2;\n  top: 5px;\n  right: 5px;\n\n  padding: 1px 2.5px 0px 4.5px;\n  color: rgba(255, 255, 255, 0.5);\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.3);\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(3.5px);\n  -webkit-backdrop-filter: blur(3.5px);\n\n  @include md {\n    top: 10px;\n    right: 10px;\n    padding: 4px 7px 3px;\n  }\n\n  &:hover {\n    color: white;\n  }\n}\n\n.card:hover {\n  transform: scale(1.05);\n  box-shadow: 0px 0px 80px -25px rgba(0, 0, 0, 0.5);\n  transition: all 0.4s;\n  border: 1px solid rgba(255, 255, 255, 0.6) !important;\n}\n\n.card-background {\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-size: cover;\n  padding: 70% 0;\n\n  @include md {\n    padding: 65.8% 0;\n  }\n}\n\n.card-img-box-shadow {\n  box-shadow: rgba(178, 198, 206, 0.12) 0px 3px 4px 2px,\n    rgba(174, 188, 194, 0.32) 0px 3px 15px 2px;\n}\n\n.card-img-border-adjusted {\n  @include md {\n    border-bottom-left-radius: 0 !important;\n    border-bottom-right-radius: 0 !important;\n  }\n}\n</style>\n","import { render } from \"./Watchlist.vue?vue&type=template&id=4a711732&scoped=true\"\nimport script from \"./Watchlist.vue?vue&type=script&lang=js\"\nexport * from \"./Watchlist.vue?vue&type=script&lang=js\"\n\nimport \"./Watchlist.vue?vue&type=style&index=0&id=4a711732&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\GameToGo\\\\Desktop\\\\ecommerce-movie7-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a711732\"]])\n\nexport default __exports__"],"sourceRoot":""}