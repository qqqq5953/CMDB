{"version":3,"sources":["webpack:///./src/views/user/Cart.vue?bb87","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/user/Cart.vue","webpack:///./src/views/user/Cart.vue?59bb"],"names":["DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","_createElementVNode","class","_hoisted_6","_hoisted_41","for","type","_createVNode","_component_Loading","active","$data","length","_hoisted_1","_createElementBlock","_Fragment","_renderList","item","key","id","onClick","$options","product","imageUrl","src","alt","title","_toDisplayString","aria-label","qty","$event","min","onChange","unit","price","_hoisted_23","total","toFixed","_hoisted_24","final_total","finalTotal","_hoisted_34","placeholder","disabled","aria-describedby","_hoisted_37","_hoisted_38","_hoisted_42","_hoisted_43","_hoisted_44","_component_Form","onSubmit","errors","_hoisted_46","_component_Field","name","rules","user","email","_component_error_message","_hoisted_48","_hoisted_50","tel","_hoisted_52","address","_hoisted_54","as","message","_hoisted_55","_component_router_link","to","data","cart","discountTotal","couponCode","isLoading","isCouponUsed","form","inject","computed","totalAmount","reduce","discountRatio","discount","methods","assignCoupon","resetCoupon","api","process","order","$http","post","catch","err","console","log","response","$router","push","params","orderID","orderId","useCoupon","coupon","code","getCartProduct","success","updateProductTotal","product_id","put","carts","deleteProduct","delete","emitter","emit","created","__exports__","render"],"mappings":"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","file":"js/chunk-3bfb6c03.96e49821.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Cart.vue?vue&type=style&index=0&id=1a58a53f&lang=scss&scoped=true\"","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container py-5 px-3 px-xl-0\" :class=\"{ 'h-100': !cart.length }\">\n    <header>\n      <div class=\"d-flex align-items-center\">\n        <i class=\"bi bi-cart-fill text-warning me-3 fs-2\"></i>\n        <h2 class=\"h1 mb-0 text-primary\">My cart</h2>\n      </div>\n    </header>\n    <main :class=\"{ 'h-100': !cart.length }\">\n      <section class=\"\">\n        <!-- 購物車商品 -->\n        <div\n          class=\"border-bottom border-primary pb-3 pt-4\"\n          v-for=\"item in cart\"\n          :key=\"item.id\"\n        >\n          <ul\n            class=\"row align-items-start align-items-xl-center mb-0 list-unstyled\"\n          >\n            <li class=\"col-2 col-md-1 align-self-lg-center text-center\">\n              <button\n                @click.prevent=\"deleteProduct(item)\"\n                type=\"button\"\n                class=\"btn btn-outline-warning btn-sm px-1 py-0 border-1\"\n              >\n                <i class=\"bi bi-x\"></i>\n              </button>\n            </li>\n            <li class=\"col-4 col-md-3 text-center\">\n              <img\n                v-if=\"item.product.imageUrl\"\n                :src=\"item.product.imageUrl[0]\"\n                class=\"img-adjusted img-fluid d-inline-block\"\n                :alt=\"item.product.title\"\n              />\n              <span\n                v-else\n                class=\"badge bg-primary fst-italic text-warning rounded-pill\"\n                >Subscription</span\n              >\n            </li>\n            <li class=\"col-6 col-md-8\">\n              <div class=\"row justify-content-between align-items-xl-center\">\n                <!-- title -->\n                <div class=\"col-12 col-md-6 col-lg-4 col-xl-4\">\n                  <h2 class=\"fs-5 mb-md-0\">{{ item.product.title }}</h2>\n                </div>\n                <!-- 數量 -->\n                <div class=\"col-12 col-md-6 col-lg-4 col-xl-3\">\n                  <div class=\"input-group input-group-sm\">\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      aria-label=\"number\"\n                      v-model.number=\"item.qty\"\n                      min=\"1\"\n                      @change=\"updateProductTotal(item)\"\n                    />\n                    <span class=\"input-group-text fs-6\"\n                      >/ {{ item.product.unit }}</span\n                    >\n                  </div>\n                </div>\n                <!-- 單價 -->\n                <div class=\"col-12 col-lg-4 col-xl-2\">\n                  <div class=\"text-end py-2 py-lg-0 price-font border-adjusted\">\n                    Price: ${{ item.product.price }}\n                  </div>\n                </div>\n                <!-- 單件商品總價 -->\n                <div class=\"col-12 col-xl-3\">\n                  <div class=\"text-end pt-2 price-font\">\n                    <div v-if=\"!isCouponUsed\">\n                      Total: ${{ item.total.toFixed(2) }}\n                    </div>\n                    <div v-if=\"isCouponUsed\">\n                      <del>Total: ${{ item.total.toFixed(2) }}</del>\n                      <div class=\"text-warning\">\n                        After discount: ${{ item.final_total.toFixed(2) }}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <!-- 購物車總金額 -->\n        <div class=\"mt-2 total-price-font\" v-if=\"cart.length\">\n          <div class=\"text-end text-danger\" v-if=\"!isCouponUsed\">\n            Total: ${{ totalAmount.total.toFixed(2) }}\n          </div>\n          <!-- 用 coupon 後金額 -->\n          <div v-else class=\"text-end\">\n            <del>Total: ${{ totalAmount.total.toFixed(2) }}</del>\n            <div class=\"text-danger\">\n              After discount: ${{ totalAmount.finalTotal.toFixed(2) }}\n            </div>\n            <div class=\"text-danger fs-6\">{{ discountRatio }}% off</div>\n          </div>\n        </div>\n      </section>\n\n      <section class=\"row justify-content-center\" v-if=\"cart.length\">\n        <div class=\"col-lg-6\">\n          <!-- 優惠券 -->\n          <section class=\"py-5\">\n            <h3 class=\"h4 mb-3\">Use Coupon</h3>\n            <div class=\"input-group input-group-sm\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                :placeholder=\"\n                  totalAmount.total <= 120\n                    ? 'No coupon available ...'\n                    : 'Your coupon is ...'\n                \"\n                v-model=\"couponCode\"\n                disabled\n                aria-label=\"input coupon\"\n                aria-describedby=\"button-addon2\"\n              />\n              <button\n                class=\"btn btn-outline-secondary text-muted\"\n                id=\"button-addon2\"\n                type=\"button\"\n                @click=\"useCoupon\"\n                :disabled=\"isCouponUsed\"\n                v-if=\"isCouponUsed\"\n              >\n                Coupon used\n              </button>\n              <button\n                class=\"btn btn-outline-warning\"\n                type=\"button\"\n                @click=\"useCoupon\"\n                id=\"button-addon2\"\n                :disabled=\"totalAmount.total <= 120\"\n                v-else\n              >\n                Use Coupon\n              </button>\n            </div>\n            <small class=\"text-warning fs-6\" v-if=\"!isCouponUsed\"\n              >* See Coupon Usage <i class=\"bi bi-arrow-down\"></i>\n            </small>\n\n            <!-- Coupon usage -->\n            <div class=\"accordion mt-3\" id=\"accordionExample\">\n              <div class=\"accordion-item\">\n                <h4 class=\"accordion-header\" id=\"headingOne\">\n                  <button\n                    class=\"accordion-button collapsed py-2 px-3 fs-6 text-muted\"\n                    type=\"button\"\n                    data-bs-toggle=\"collapse\"\n                    data-bs-target=\"#couponUsage\"\n                    aria-expanded=\"true\"\n                    aria-controls=\"collapseOne\"\n                  >\n                    Coupon Usage\n                  </button>\n                </h4>\n                <div\n                  id=\"couponUsage\"\n                  class=\"accordion-collapse collapse\"\n                  aria-labelledby=\"headingOne\"\n                  data-bs-parent=\"#accordionExample\"\n                >\n                  <div class=\"accordion-body\">\n                    <ul class=\"fs-6 list-unstyled mb-0\">\n                      <li>\n                        <div class=\"d-flex py-1\">\n                          <div>\n                            <span>$120</span>\n                            <i class=\"bi bi-arrow-right mx-2\"></i>\n                            <span class=\"fst-italic fw-bold\">CMDBTEN</span>\n                          </div>\n                          <span class=\"badge bg-primary ms-auto fst-italic\"\n                            >10% off</span\n                          >\n                        </div>\n                      </li>\n                      <li>\n                        <div class=\"d-flex py-1\">\n                          <div>\n                            <span>$240</span>\n                            <i class=\"bi bi-arrow-right mx-2\"></i>\n                            <span class=\"fst-italic fw-bold\">CMDBFIFTEEN</span>\n                          </div>\n                          <span class=\"badge bg-primary ms-auto fst-italic\"\n                            >15% off</span\n                          >\n                        </div>\n                      </li>\n                      <li>\n                        <div class=\"d-flex py-1\">\n                          <div>\n                            <span>$360</span>\n                            <i class=\"bi bi-arrow-right mx-2\"></i>\n                            <span class=\"fst-italic fw-bold\">CMDBTWENTY</span>\n                          </div>\n                          <span class=\"badge bg-primary ms-auto fst-italic\"\n                            >20% off</span\n                          >\n                        </div>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n\n          <!-- 送出訂單 -->\n          <section>\n            <h3 class=\"h4\">Delivery Info</h3>\n            <Form v-slot=\"{ errors }\" @submit=\"onSubmit\">\n              <!-- email -->\n              <div class=\"mb-3\">\n                <label for=\"email\" class=\"form-label\">Email*</label>\n                <Field\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  class=\"form-control\"\n                  :class=\"{ 'is-invalid': errors['email'] }\"\n                  placeholder=\"請輸入 Email\"\n                  rules=\"email|required\"\n                  v-model=\"form.user.email\"\n                >\n                </Field>\n                <error-message\n                  name=\"email\"\n                  class=\"invalid-feedback\"\n                ></error-message>\n              </div>\n\n              <!-- name -->\n              <div class=\"mb-3\">\n                <label for=\"name\" class=\"form-label\">姓名*</label>\n                <Field\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  :class=\"{ 'is-invalid': errors['name'] }\"\n                  placeholder=\"請輸入姓名\"\n                  rules=\"required\"\n                  v-model=\"form.user.name\"\n                ></Field>\n                <error-message\n                  name=\"name\"\n                  class=\"invalid-feedback\"\n                ></error-message>\n              </div>\n\n              <!-- tel -->\n              <div class=\"mb-3\">\n                <label for=\"tel\" class=\"form-label\">手機*</label>\n                <Field\n                  id=\"tel\"\n                  name=\"tel\"\n                  type=\"tel\"\n                  class=\"form-control\"\n                  :class=\"{ 'is-invalid': errors['tel'] }\"\n                  placeholder=\"請輸入手機\"\n                  rules=\"numeric|length: 10|required\"\n                  v-model=\"form.user.tel\"\n                ></Field>\n                <error-message\n                  name=\"tel\"\n                  class=\"invalid-feedback\"\n                ></error-message>\n              </div>\n\n              <!-- address -->\n              <div class=\"mb-3\">\n                <label for=\"address\" class=\"form-label\">地址*</label>\n                <Field\n                  id=\"address\"\n                  name=\"address\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  :class=\"{ 'is-invalid': errors['address'] }\"\n                  placeholder=\"請輸入地址\"\n                  rules=\"required\"\n                  v-model=\"form.user.address\"\n                ></Field>\n                <error-message\n                  name=\"address\"\n                  class=\"invalid-feedback\"\n                ></error-message>\n              </div>\n\n              <!-- message -->\n              <div class=\"mb-3\">\n                <label for=\"message\" class=\"form-label\">留言</label>\n                <Field\n                  id=\"message\"\n                  name=\"message\"\n                  as=\"textarea\"\n                  class=\"form-control\"\n                  v-model=\"form.message\"\n                ></Field>\n              </div>\n\n              <div class=\"text-end\">\n                <button class=\"btn btn-warning\" type=\"submit\">Submit</button>\n              </div>\n            </Form>\n          </section>\n        </div>\n      </section>\n\n      <div\n        class=\"d-flex align-items-center justify-content-center h-100\"\n        v-if=\"!cart.length\"\n      >\n        <router-link :to=\"{ name: 'AllProducts' }\" class=\"btn btn-warning\"\n          >pick some movies now</router-link\n        >\n      </div>\n    </main>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      cart: [],\n      discountTotal: '',\n      couponCode: '',\n      isLoading: false,\n      isCouponUsed: false,\n      // vee-validate\n      form: {\n        user: {\n          name: 'Andy',\n          email: '123@gmail.com',\n          tel: '0987654321',\n          address: 'asd'\n        },\n        message: ''\n      }\n    };\n  },\n  inject: ['emitter'],\n  computed: {\n    totalAmount() {\n      const total = this.cart.reduce((total, item) => {\n        return total + item.total;\n      }, 0);\n      const finalTotal = this.cart.reduce((total, item) => {\n        return total + item.final_total;\n      }, 0);\n      return { total, finalTotal };\n    },\n    discountRatio() {\n      const discount =\n        (1 - this.totalAmount.finalTotal / this.totalAmount.total).toFixed(2) *\n        100;\n\n      return discount;\n    }\n  },\n  methods: {\n    assignCoupon() {\n      if (this.totalAmount.total >= 120) this.couponCode = 'CMDBTEN';\n      if (this.totalAmount.total >= 240) this.couponCode = 'CMDBFIFTEEN';\n      if (this.totalAmount.total >= 360) this.couponCode = 'CMDBTWENTY';\n    },\n    resetCoupon() {\n      this.isCouponUsed = false;\n      this.couponCode = '';\n    },\n    async onSubmit() {\n      this.isLoading = true;\n\n      // axios\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      const response = await this.$http\n        .post(api, { data: order })\n        .catch((err) => console.log(err));\n\n      this.isLoading = false;\n\n      // 轉址\n      this.$router.push({\n        name: 'UserCheckout',\n        params: { orderID: response.data.orderId }\n      });\n    },\n    async useCoupon() {\n      this.assignCoupon();\n\n      // 取得優惠券資料\n      const coupon = {\n        code: this.couponCode\n      };\n\n      // axios\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const response = await this.$http\n        .post(api, { data: coupon })\n        .catch((err) => console.log(err));\n\n      // 重新渲染畫面\n      await this.getCartProduct();\n\n      // 儲存回傳資料\n      this.isCouponUsed = response.data.success;\n      this.discountTotal = response.data.data.final_total;\n    },\n    async updateProductTotal(item) {\n      this.isLoading = true;\n\n      // 取得優惠券資料\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty\n      };\n\n      // axios\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      await this.$http\n        .put(api, { data: cart })\n        .catch((err) => console.log(err));\n\n      // 重新渲染畫面\n      await this.getCartProduct();\n\n      this.isLoading = false;\n    },\n    async getCartProduct() {\n      this.isLoading = true;\n\n      // axios\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const response = await this.$http\n        .get(api)\n        .catch((err) => console.log(err));\n\n      // 儲存回傳資料\n      this.cart = response.data.data.carts;\n\n      // 重設 coupon\n      this.resetCoupon();\n\n      this.isLoading = false;\n    },\n    async deleteProduct(item) {\n      // axios\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      await this.$http.delete(api).catch((err) => console.log(err));\n\n      // 重新渲染畫面\n      await this.getCartProduct();\n\n      // 更新 navbar cart 數量\n      this.emitter.emit('calculate-product-number', this.cart.length);\n    }\n  },\n  created() {\n    this.getCartProduct();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.img-adjusted {\n  object-fit: cover;\n  object-position: center center;\n  aspect-ratio: 3 / 4;\n  max-height: 99px;\n\n  @include md {\n    max-height: 111px;\n  }\n\n  @include xl {\n    max-height: 150px;\n  }\n}\n\n.price-font {\n  font-size: 0.75rem;\n\n  @include md {\n    font-size: 1rem;\n  }\n}\n\n.total-price-font {\n  font-size: 1rem;\n\n  @include md {\n    font-size: 1.25rem;\n  }\n}\n\n.border-adjusted {\n  border-bottom: 1px solid #eceeef;\n\n  @include lg {\n    border-bottom: none;\n  }\n}\n</style>\n","import { render } from \"./Cart.vue?vue&type=template&id=1a58a53f&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=1a58a53f&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\GameToGo\\\\Desktop\\\\ecommerce-movie7-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a58a53f\"]])\n\nexport default __exports__"],"sourceRoot":""}