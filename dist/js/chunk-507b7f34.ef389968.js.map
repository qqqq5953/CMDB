{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.match.js","webpack:///./src/views/user/AllResults.vue","webpack:///./src/views/user/AllResults.vue?1dc2","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["call","fixRegExpWellKnownSymbolLogic","anObject","toLength","toString","requireObjectCoercible","getMethod","advanceStringIndex","regExpExec","MATCH","nativeMatch","maybeCallNative","regexp","O","this","matcher","undefined","RegExp","string","rx","S","res","done","value","global","fullUnicode","unicode","lastIndex","result","A","n","matchStr","class","_createElementVNode","_createVNode","_component_Loading","active","$data","_hoisted_6","length","_toDisplayString","_createElementBlock","_Fragment","_renderList","item","key","id","href","onClick","$options","_component_CardHorizontal","product","_component_PaginationForUser","totalPages","currentPage","onChangePage","onPreviousPage","onNextPage","props","genre","type","String","components","PaginationForUser","CardHorizontal","inject","data","allProducts","products","isLoading","pagination","genrePassIn","perPage","computed","queriesChange","$route","params","watch","newVal","newGenre","name","toLowerCase","getAllProducts","methods","api","process","$http","get","catch","err","console","log","response","classifyGenre","sortData","setPagination","tempProduct","filter","category","split","title","join","toUpperCase","match","page","Math","ceil","startPage","endPage","slice","window","scrollTo","getProductDetails","$router","push","productID","created","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","nameRE","exec","NAME","configurable","error"],"mappings":"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","file":"js/chunk-507b7f34.ef389968.js","sourcesContent":["'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar getMethod = require('../internals/get-method');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : getMethod(regexp, MATCH);\n      return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeMatch, rx, S);\n\n      if (res.done) return res.value;\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = toString(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"bg-dark\">\n    <div class=\"container py-5 px-5 px-xl-0\">\n      <div class=\"row justify-content-center mb-5\">\n        <div class=\"col-xl-9\">\n          <header>\n            <div class=\"d-flex align-items-center\">\n              <i\n                class=\"bi bi-film text-warning me-3 fs-3 d-none d-md-inline-block\"\n              ></i>\n              <h2 class=\"h1 mb-0 text-white\">\n                {{ allProducts.length }} results for:\n                <span class=\"text-warning\">{{ genrePassIn }}</span>\n              </h2>\n            </div>\n          </header>\n          <main class=\"py-4\">\n            <ul class=\"list-unstyled\">\n              <li class=\"mb-4\" v-for=\"item in products\" :key=\"item.id\">\n                <a\n                  href=\"#\"\n                  class=\"text-decoration-none d-block\"\n                  @click.prevent=\"getProductDetails(item.id)\"\n                >\n                  <CardHorizontal :product=\"item\"></CardHorizontal>\n                </a>\n              </li>\n            </ul>\n          </main>\n\n          <PaginationForUser\n            :totalPages=\"totalPages\"\n            :currentPage=\"currentPage\"\n            @change-page=\"setPagination\"\n            @previous-page=\"setPagination\"\n            @next-page=\"setPagination\"\n          ></PaginationForUser>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PaginationForUser from '@/components/PaginationForUser.vue';\nimport CardHorizontal from '@/components/CardHorizontal.vue';\n\nexport default {\n  props: {\n    genre: {\n      type: String\n    }\n  },\n  components: {\n    PaginationForUser,\n    CardHorizontal\n  },\n  inject: ['emitter', 'sortData'],\n  data() {\n    return {\n      allProducts: [],\n      products: [],\n      isLoading: false,\n      pagination: {},\n      genrePassIn: '',\n      // pagination\n      totalPages: undefined,\n      currentPage: 1,\n      perPage: 6\n    };\n  },\n  computed: {\n    queriesChange() {\n      return this.$route.params.genre;\n    }\n  },\n  watch: {\n    queriesChange(newVal) {\n      const newGenre = newVal;\n\n      // 防止跳回首頁會更新資料\n      if (this.$route.name === 'AllResults') {\n        this.genrePassIn = newGenre.toLowerCase();\n        this.getAllProducts();\n      }\n    }\n  },\n  methods: {\n    async getAllProducts() {\n      this.isLoading = true;\n\n      // api\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      const response = await this.$http.get(api).catch((err) => {\n        console.log(err);\n      });\n\n      // 根據不同 Genre 決定 allProducts 資料內容\n      this.allProducts = this.classifyGenre(response);\n\n      // 照熱門度分類\n      this.allProducts = this.sortData(this.allProducts, 'content');\n\n      // 設定分頁\n      this.setPagination();\n\n      this.isLoading = false;\n    },\n    classifyGenre(response) {\n      let tempProduct = [];\n\n      // 排除訂閱的類型（重要）\n      tempProduct = response.data.products.filter((item) => {\n        return item.category !== 'Subscription';\n      });\n\n      if (this.genrePassIn === 'nowplaying') {\n        // 首頁傳來為 NowPlaying\n        tempProduct = tempProduct.filter((item) => {\n          const genre = item.category.split('|')[1];\n          return genre === 'nowplaying';\n        });\n      } else if (this.genrePassIn === 'upcoming') {\n        // 首頁傳來為 Upcoming\n        tempProduct = tempProduct.filter((item) => {\n          const genre = item.category.split('|')[1];\n          return genre === 'upcoming';\n        });\n      } else {\n        // see all results\n        tempProduct = tempProduct.filter((item) => {\n          return item.title\n            .split('-')\n            .join(' ')\n            .toUpperCase()\n            .match(this.genrePassIn.toUpperCase());\n        });\n      }\n\n      return tempProduct;\n    },\n    setPagination(page = 1) {\n      this.currentPage = page;\n\n      // 設定總頁數、起訖頁\n      this.totalPages = Math.ceil(this.allProducts.length / this.perPage);\n      const startPage = this.currentPage * this.perPage - this.perPage;\n      const endPage = startPage + this.perPage;\n\n      this.products = this.allProducts.slice(startPage, endPage);\n\n      // 畫面滾動至最上方\n      window.scrollTo(0, -1000);\n    },\n    getProductDetails(id) {\n      this.$router.push({ name: 'Product', params: { productID: id } });\n    }\n  },\n  created() {\n    // 畫面滾動至最上方\n    window.scrollTo(0, -1000);\n\n    this.genrePassIn = this.$route.params.genre;\n    this.getAllProducts();\n  }\n};\n</script>\n","import { render } from \"./AllResults.vue?vue&type=template&id=16705443\"\nimport script from \"./AllResults.vue?vue&type=script&lang=js\"\nexport * from \"./AllResults.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\GameToGo\\\\Desktop\\\\ecommerce-movie7-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}