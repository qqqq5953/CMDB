{"version":3,"sources":["webpack:///./src/views/user/AllProducts.vue?e105","webpack:///./src/views/user/AllProducts.vue","webpack:///./src/views/user/AllProducts.vue?5951"],"names":["class","_createElementVNode","_createVNode","_component_Loading","active","$data","_hoisted_5","_createElementBlock","_Fragment","_renderList","item","key","id","href","onClick","$options","_component_CardHorizontal","product","badge-for-mobile","_withCtx","itemForBadge","category","split","_toDisplayString","badge-for-mobile-above","_component_PaginationForUser","totalPages","currentPage","onChangePage","onPreviousPage","onNextPage","components","PaginationForUser","CardHorizontal","inject","data","allProducts","products","isLoading","undefined","perPage","methods","getAllProducts","api","process","$http","get","catch","err","console","log","response","filter","sortData","setPagination","page","this","Math","ceil","length","startPage","endPage","slice","window","scrollTo","getProductDetails","$router","push","name","params","productID","created","__exports__","render"],"mappings":"uIAAA,W,iKCEOA,MAAM,W,GACJA,MAAM,+B,GACJA,MAAM,mC,GACJA,MAAM,Y,uBACTC,eAKS,eAJPA,eAGM,OAHDD,MAAM,6BAA2B,CACpCC,eAA0D,KAAvDD,MAAM,+CACTC,eAA8C,MAA1CD,MAAM,sBAAqB,kBAHnC,M,GAMMA,MAAM,Q,GACNA,MAAM,iB,uBAcEA,MAAM,uG,SAWNA,MAAM,kF,qLArC5BE,eAAuCC,EAAA,CAA7BC,OAAQC,aAAS,mBAC3BJ,eAyDM,MAzDN,EAyDM,CAxDJA,eAuDM,MAvDN,EAuDM,CAtDJA,eAqDM,MArDN,EAqDM,CApDJA,eAmDM,MAnDN,EAmDM,CAlDJK,EAMAL,eAmCO,OAnCP,EAmCO,CAlCLA,eAiCK,KAjCL,EAiCK,qBAhCHM,eA+BKC,OAAA,KAAAC,eA/B2BJ,YAAQ,SAAhBK,G,wBAAxBH,eA+BK,MA/BDP,MAAM,OAAiCW,IAAKD,EAAKE,IAArD,CACEX,eA6BI,KA5BFY,KAAK,IACLb,MAAM,+BACLc,QAAK,mCAAUC,oBAAkBL,EAAKE,MAAE,cAH3C,CAKEV,eAuBiBc,EAAA,CAvBAC,QAASP,GAAI,CAEjBQ,mBAAgBC,gBACzB,gBAD6BC,EAC7B,EAD6BA,aAC7B,MADyC,CAEqB,aAA3BA,EAAaC,SAASC,MAAK,0BAD9Df,eAOM,MAPN,EAOMgB,eADDH,EAAaC,SAASC,MAAK,aANhC,0BAUSE,yBAAsBL,gBAC/B,gBADmCC,EACnC,EADmCA,aACnC,MAD+C,CAEe,aAA3BA,EAAaC,SAASC,MAAK,0BAD9Df,eAOM,MAPN,EAOMgB,eADDH,EAAaC,SAASC,MAAK,aANhC,0B,KAdJ,mBALF,UADF,UAmCJpB,eAMqBuB,EAAA,CALlBC,WAAYrB,aACZsB,YAAatB,cACbuB,aAAab,gBACbc,eAAed,gBACfe,WAAWf,iBALd,2FA/CR,I,4FAgEa,GACbgB,WAAY,CACVC,yBACAC,uBAEFC,OAAQ,CAAC,UAAW,YACpBC,KANa,WAOX,MAAO,CACLC,YAAa,GACbC,SAAU,GACVC,WAAW,EAEXZ,gBAAYa,EACZZ,YAAa,EACba,QAAS,IAGbC,QAAS,CACDC,eADC,WACgB,uKAEfC,EAFe,UAENC,wCAFM,eAEwBA,iBAFxB,0BAGE,EAAKC,MAAMC,IAAIH,GAAKI,OAAM,SAACC,GAChDC,QAAQC,IAAIF,MAJO,OAGfG,EAHe,OAQrB,EAAKf,YAAce,EAAShB,KAAKE,SAGjC,EAAKD,YAAc,EAAKA,YAAYgB,QAAO,SAAC1C,GAC1C,MAAyB,iBAAlBA,EAAKW,YAId,EAAKe,YAAc,EAAKiB,SAAS,EAAKjB,YAAa,WAGnD,EAAKkB,gBAnBgB,8CAqBvBA,cAtBO,WAsBiB,IAAVC,EAAU,uDAAH,EACnBC,KAAK7B,YAAc4B,EAGnBC,KAAK9B,WAAa+B,KAAKC,KAAKF,KAAKpB,YAAYuB,OAASH,KAAKhB,SAC3D,IAAMoB,EAAYJ,KAAK7B,YAAc6B,KAAKhB,QAAUgB,KAAKhB,QACnDqB,EAAUD,EAAYJ,KAAKhB,QAEjCgB,KAAKnB,SAAWmB,KAAKpB,YAAY0B,MAAMF,EAAWC,GAGlDE,OAAOC,SAAS,GAAI,MAEtBC,kBAnCO,SAmCWrD,GAChB4C,KAAKU,QAAQC,KAAK,CAAEC,KAAM,UAAWC,OAAQ,CAAEC,UAAW1D,OAG9D2D,QAxDa,WA0DXR,OAAOC,SAAS,GAAI,KAEpBR,KAAKd,mB,iCCvHT,MAAM8B,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E","file":"js/chunk-7afd7095.f90c150c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AllProducts.vue?vue&type=style&index=0&id=0c0cdb6d&lang=scss&scoped=true\"","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"bg-dark\">\n    <div class=\"container py-5 px-5 px-xl-0\">\n      <div class=\"row justify-content-center mb-5\">\n        <div class=\"col-xl-9\">\n          <header>\n            <div class=\"d-flex align-items-center\">\n              <i class=\"bi bi-play-btn-fill text-warning me-3 fs-2\"></i>\n              <h2 class=\"h1 mb-0 text-white\">Our Movies</h2>\n            </div>\n          </header>\n          <main class=\"py-4\">\n            <ul class=\"list-unstyled\">\n              <li class=\"mb-4\" v-for=\"item in products\" :key=\"item.id\">\n                <a\n                  href=\"#\"\n                  class=\"text-decoration-none d-block\"\n                  @click.prevent=\"getProductDetails(item.id)\"\n                >\n                  <CardHorizontal :product=\"item\">\n                    <!-- badge for mobile for upcoming movie-->\n                    <template #badge-for-mobile=\"{ itemForBadge }\">\n                      <div\n                        v-if=\"\n                          itemForBadge.category.split('|')[1] === 'upcoming'\n                        \"\n                        class=\"position-absolute end-0 badge badge-mobile rounded-pill mt-3 me-3 text-warning fst-italic d-sm-none\"\n                      >\n                        {{ itemForBadge.category.split('|')[1] }}\n                      </div>\n                    </template>\n                    <!-- badge for pad 以上 for upcoming movie-->\n                    <template #badge-for-mobile-above=\"{ itemForBadge }\">\n                      <div\n                        v-if=\"\n                          itemForBadge.category.split('|')[1] === 'upcoming'\n                        \"\n                        class=\"badge bg-primary rounded-pill text-warning fst-italic d-none d-sm-inline-block\"\n                      >\n                        {{ itemForBadge.category.split('|')[1] }}\n                      </div>\n                    </template>\n                  </CardHorizontal>\n                </a>\n              </li>\n            </ul>\n          </main>\n\n          <PaginationForUser\n            :totalPages=\"totalPages\"\n            :currentPage=\"currentPage\"\n            @change-page=\"setPagination\"\n            @previous-page=\"setPagination\"\n            @next-page=\"setPagination\"\n          ></PaginationForUser>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PaginationForUser from '@/components/PaginationForUser.vue';\nimport CardHorizontal from '@/components/CardHorizontal.vue';\n\nexport default {\n  components: {\n    PaginationForUser,\n    CardHorizontal\n  },\n  inject: ['emitter', 'sortData'],\n  data() {\n    return {\n      allProducts: [],\n      products: [],\n      isLoading: false,\n      // pagination\n      totalPages: undefined,\n      currentPage: 1,\n      perPage: 6\n    };\n  },\n  methods: {\n    async getAllProducts() {\n      // api\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      const response = await this.$http.get(api).catch((err) => {\n        console.log(err);\n      });\n\n      // 儲存資料\n      this.allProducts = response.data.products;\n\n      // 排除訂閱的類型（重要）\n      this.allProducts = this.allProducts.filter((item) => {\n        return item.category !== 'Subscription';\n      });\n\n      // 照熱門度分類\n      this.allProducts = this.sortData(this.allProducts, 'content');\n\n      // 設置分頁\n      this.setPagination();\n    },\n    setPagination(page = 1) {\n      this.currentPage = page;\n\n      // 設定總頁數、起訖頁\n      this.totalPages = Math.ceil(this.allProducts.length / this.perPage);\n      const startPage = this.currentPage * this.perPage - this.perPage;\n      const endPage = startPage + this.perPage;\n\n      this.products = this.allProducts.slice(startPage, endPage);\n\n      // 畫面滾動至最上方\n      window.scrollTo(0, -1000);\n    },\n    getProductDetails(id) {\n      this.$router.push({ name: 'Product', params: { productID: id } });\n    }\n  },\n  created() {\n    // 畫面滾動至最上方\n    window.scrollTo(0, -1000);\n\n    this.getAllProducts();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.badge-mobile {\n  z-index: 2;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(8.5px);\n  -webkit-backdrop-filter: blur(8.5px);\n}\n</style>\n","import { render } from \"./AllProducts.vue?vue&type=template&id=0c0cdb6d&scoped=true\"\nimport script from \"./AllProducts.vue?vue&type=script&lang=js\"\nexport * from \"./AllProducts.vue?vue&type=script&lang=js\"\n\nimport \"./AllProducts.vue?vue&type=style&index=0&id=0c0cdb6d&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\GameToGo\\\\Desktop\\\\ecommerce-movie7-master\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c0cdb6d\"]])\n\nexport default __exports__"],"sourceRoot":""}